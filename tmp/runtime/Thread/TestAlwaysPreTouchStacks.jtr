#Test Results (version 2)
#Mon Jul 21 17:49:29 CST 2025
#-----testdescription-----
$file=/hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg/runtime/Thread/TestAlwaysPreTouchStacks.java
$root=/hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg
keywords=driver
library=/test/lib
modules=java.base/jdk.internal.misc java.management
requires=os.family \!\= "aix"
run=USER_SPECIFIED driver TestAlwaysPreTouchStacks preTouch\n
source=TestAlwaysPreTouchStacks.java
title=Test AlwaysPreTouchThreadStacks

#-----environment-----

#-----testresult-----
description=file\:/hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg/runtime/Thread/TestAlwaysPreTouchStacks.java
elapsed=1946 0\:00\:01.946
end=Mon Jul 21 17\:49\:29 CST 2025
environment=regtest
execStatus=Passed. Execution successful
harnessLoaderMode=Classpath Loader
harnessVariety=Full Bundle
hostname=hygon
javatestOS=Linux 5.15.0-25-generic (amd64)
javatestVersion=6.0-ea+b24-2025-06-01-${BUILT_FROM_COMMIT}
jtregVersion=jtreg 7.5.2 dev 0
modules=java.base/jdk.internal.misc java.management
script=com.sun.javatest.regtest.exec.RegressionScript
sections=script_messages build compile driver
start=Mon Jul 21 17\:49\:27 CST 2025
test=runtime/Thread/TestAlwaysPreTouchStacks.java
testJDK=/hygonjdk/yansendao/git/jdk-ysd/build/linux-x86_64-server-release/images/jdk
testJDK_OS=[name\:Linux,arch\:amd64,version\:5.15.0-25-generic,family\:linux,simple_arch\:x64,simple_version\:5.15,processors\:256,maxMemory\:810876829696,maxSwap\:8589930496]
testJDK_os.arch=amd64
testJDK_os.name=Linux
testJDK_os.version=5.15.0-25-generic
totalTime=1946
user.name=yansendao
work=/hygonjdk/yansendao/git/jdk-ysd/tmp/runtime/Thread

#section:script_messages
----------messages:(7/437)----------
JDK under test: /hygonjdk/yansendao/git/jdk-ysd/build/linux-x86_64-server-release/images/jdk
openjdk version "26-internal" 2026-03-17
OpenJDK Runtime Environment (build 26-internal-d83346dc)
OpenJDK 64-Bit Server VM (build 26-internal-d83346dc, mixed mode, sharing)
Library /test/lib; kind: packages
   source directory: /hygonjdk/yansendao/git/jdk-ysd/test/lib
   class directory: /hygonjdk/yansendao/git/jdk-ysd/tmp/classes/4/test/lib

#section:build
----------messages:(7/237)----------
command: build TestAlwaysPreTouchStacks
reason: Named class compiled on demand
started: Mon Jul 21 17:49:27 CST 2025
Test directory:
  compile: TestAlwaysPreTouchStacks
finished: Mon Jul 21 17:49:29 CST 2025
elapsed time (seconds): 1.61
result: Passed. Build successful

#section:compile
----------messages:(8/432)----------
command: compile /hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg/runtime/Thread/TestAlwaysPreTouchStacks.java
reason: .class file out of date or does not exist
started: Mon Jul 21 17:49:27 CST 2025
Additional options from @modules: --add-modules java.base,java.management --add-exports java.base/jdk.internal.misc=ALL-UNNAMED
Mode: othervm
Process id: 2830873
finished: Mon Jul 21 17:49:29 CST 2025
elapsed time (seconds): 1.607
----------configuration:(9/526)----------
javac compilation environment
  add modules: java.base java.management   
  add exports: java.base/jdk.internal.misc ALL-UNNAMED
  source path: /hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg/runtime/Thread 
               /hygonjdk/yansendao/git/jdk-ysd/test/lib 
  class path:  /hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg/runtime/Thread 
               /hygonjdk/yansendao/git/jdk-ysd/tmp/classes/4/runtime/Thread/TestAlwaysPreTouchStacks.d 
               /hygonjdk/yansendao/git/jdk-ysd/tmp/classes/4/test/lib 

----------rerun:(31/2062)*----------
cd /hygonjdk/yansendao/git/jdk-ysd/tmp/scratch/18 && \\
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/999/bus \\
DISPLAY=:7 \\
HOME=/hygonjdk/yansendao \\
LANG=C.UTF-8 \\
PATH=/bin:/usr/bin:/usr/sbin \\
XDG_DATA_DIRS=/usr/local/share:/usr/share:/var/lib/snapd/desktop \\
XDG_RUNTIME_DIR=/run/user/999 \\
XDG_SESSION_CLASS=user \\
XDG_SESSION_ID=5681 \\
XDG_SESSION_TYPE=tty \\
    /hygonjdk/yansendao/git/jdk-ysd/build/linux-x86_64-server-release/images/jdk/bin/javac \\
        -J-Dtest.vm.opts= \\
        -J-Dtest.tool.vm.opts= \\
        -J-Dtest.compiler.opts= \\
        -J-Dtest.java.opts= \\
        -J-Dtest.jdk=/hygonjdk/yansendao/git/jdk-ysd/build/linux-x86_64-server-release/images/jdk \\
        -J-Dcompile.jdk=/hygonjdk/yansendao/git/jdk-ysd/build/linux-x86_64-server-release/images/jdk \\
        -J-Dtest.timeout.factor=1.0 \\
        -J-Dtest.nativepath=/hygonjdk/yansendao/git/jdk-ysd/build/linux-x86_64-server-release/images/test/hotspot/jtreg/native \\
        -J-Dtest.root=/hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg \\
        -J-Dtest.name=runtime/Thread/TestAlwaysPreTouchStacks.java \\
        -J-Dtest.verbose=Verbose[p=BRIEF,f=FULL,e=FULL,t=false,m=false] \\
        -J-Dtest.file=/hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg/runtime/Thread/TestAlwaysPreTouchStacks.java \\
        -J-Dtest.main.class=TestAlwaysPreTouchStacks \\
        -J-Dtest.src=/hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg/runtime/Thread \\
        -J-Dtest.src.path=/hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg/runtime/Thread:/hygonjdk/yansendao/git/jdk-ysd/test/lib \\
        -J-Dtest.classes=/hygonjdk/yansendao/git/jdk-ysd/tmp/classes/4/runtime/Thread/TestAlwaysPreTouchStacks.d \\
        -J-Dtest.class.path=/hygonjdk/yansendao/git/jdk-ysd/tmp/classes/4/runtime/Thread/TestAlwaysPreTouchStacks.d:/hygonjdk/yansendao/git/jdk-ysd/tmp/classes/4/test/lib \\
        -J-Dtest.modules='java.base/jdk.internal.misc java.management' \\
        @/hygonjdk/yansendao/git/jdk-ysd/tmp/runtime/Thread/TestAlwaysPreTouchStacks.d/compile.0.jta
----------System.out:(0/0)----------
----------System.err:(0/0)----------
result: Passed. Compilation successful

#section:driver
----------messages:(8/396)----------
command: driver TestAlwaysPreTouchStacks preTouch
reason: User specified action: run driver TestAlwaysPreTouchStacks preTouch 
started: Mon Jul 21 17:49:29 CST 2025
Mode: othervm
Additional options from @modules: --add-modules java.base,java.management --add-exports java.base/jdk.internal.misc=ALL-UNNAMED
Process id: 2849365
finished: Mon Jul 21 17:49:29 CST 2025
elapsed time (seconds): 0.263
----------configuration:(4/111)----------
Boot Layer
  add modules: java.base java.management   
  add exports: java.base/jdk.internal.misc ALL-UNNAMED

----------System.out:(10/1980)----------
Command line: [/hygonjdk/yansendao/git/jdk-ysd/build/linux-x86_64-server-release/images/jdk/bin/java -cp /hygonjdk/yansendao/git/jdk-ysd/tmp/classes/4/runtime/Thread/TestAlwaysPreTouchStacks.d:/hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg/runtime/Thread:/hygonjdk/yansendao/git/jdk-ysd/tmp/classes/4/test/lib:/hygonjdk/yansendao/git/jdk-ysd/test/lib:/hygonjdk/yansendao/software/jdk/jtreg-7.5/lib/javatest.jar:/hygonjdk/yansendao/software/jdk/jtreg-7.5/lib/jtreg.jar -XX:+UnlockDiagnosticVMOptions -Xmx100M -XX:NativeMemoryTracking=summary -XX:+PrintNMTStatistics -XX:+AlwaysPreTouchStacks -XX:-UseMadvPopulateWrite TestAlwaysPreTouchStacks test ]
[2025-07-21T09:49:29.658876618Z] Gathering output for process 2851485
[2025-07-21T09:49:29.670724439Z] Waiting for completion for process 2851485
[2025-07-21T09:49:29.718968291Z] Waiting for completion finished for process 2851485
>>>>>                             (stack: reserved=147914752, committed=142495744, peak=142495744): 147914752 - 142495744
Command line: [/hygonjdk/yansendao/git/jdk-ysd/build/linux-x86_64-server-release/images/jdk/bin/java -cp /hygonjdk/yansendao/git/jdk-ysd/tmp/classes/4/runtime/Thread/TestAlwaysPreTouchStacks.d:/hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg/runtime/Thread:/hygonjdk/yansendao/git/jdk-ysd/tmp/classes/4/test/lib:/hygonjdk/yansendao/git/jdk-ysd/test/lib:/hygonjdk/yansendao/software/jdk/jtreg-7.5/lib/javatest.jar:/hygonjdk/yansendao/software/jdk/jtreg-7.5/lib/jtreg.jar -XX:+UnlockDiagnosticVMOptions -Xmx100M -XX:NativeMemoryTracking=summary -XX:+PrintNMTStatistics -XX:-UseMadvPopulateWrite TestAlwaysPreTouchStacks test ]
[2025-07-21T09:49:29.731140612Z] Gathering output for process 2853229
[2025-07-21T09:49:29.731879762Z] Waiting for completion for process 2853229
[2025-07-21T09:49:29.785000884Z] Waiting for completion finished for process 2853229
>>>>>                             (stack: reserved=147914752, committed=8458240, peak=8458240): 147914752 - 8458240
----------System.err:(239/10165)----------
 stdout: [Alive: 0
Alive: 4
Alive: 5
Alive: 1
Alive: 7
Alive: 3
Alive: 6
Alive: 8
Alive: 2
Alive: 10
Alive: 13
Alive: 11
Alive: 12
Alive: 14
Alive: 15
Alive: 9

Native Memory Tracking:

Total: reserved=2082494182, committed=688183014
       malloc: 348788454 #7781, peak=348656348 #7813
       mmap:   reserved=1733705728, committed=339394560

-                 Java Heap (reserved=104857600, committed=104857600)
                            (mmap: reserved=104857600, committed=104857600, at peak)

-                     Class (reserved=1073818729, committed=207977)
                            (classes #817)
                            (  instance classes #676, array classes #141)
                            (malloc=76905 tag=Class #991) (peak=77049 #992)
                            (mmap: reserved=1073741824, committed=131072, at peak)
                            (  Metadata:   )
                            (    reserved=67108864, committed=327680)
                            (    used=234904)
                            (    waste=92776 =28.31%)
                            (  Class space:)
                            (    reserved=1073741824, committed=131072)
                            (    used=15120)
                            (    waste=115952 =88.46%)

-                    Thread (reserved=148033552, committed=142614544)
                            (threads #28)
                            (stack: reserved=147914752, committed=142495744, peak=142495744)
                            (malloc=81600 tag=Thread #200) (peak=90656 #227)
                            (arena=37200 #62) (peak=83456 #30)

-                      Code (reserved=253697440, committed=7798176)
                            (malloc=68040 tag=Code #1637) (peak=68048 #1638)
                            (mmap: reserved=253628416, committed=7729152, at peak)
                            (arena=984 #1) (peak=1968 #2)

-                        GC (reserved=415827970, committed=415827970)
                            (malloc=346195970 tag=GC #1488) (at peak)
                            (mmap: reserved=69632000, committed=69632000, at peak)

-                 GCCardSet (reserved=488, committed=488)
                            (malloc=488 tag=GCCardSet #4) (peak=616 #5)

-                  Compiler (reserved=203592, committed=203592)
                            (malloc=2856 tag=Compiler #27) (peak=3816 #33)
                            (arena=200736 #6) (peak=650872 #13)

-                  Internal (reserved=295646, committed=295646)
                            (malloc=258782 tag=Internal #1472) (peak=259004 #1481)
                            (mmap: reserved=36864, committed=36864, at peak)

-                    Symbol (reserved=1161492, committed=1161492)
                            (malloc=792852 tag=Symbol #155) (at peak)
                            (arena=368640 #1) (at peak)

-    Native Memory Tracking (reserved=146778, committed=146778)
                            (malloc=6720 tag=Native Memory Tracking #120) (peak=7192 #130)
                            (tracking overhead=140058)

-        Shared class space (reserved=16777312, committed=14176352, readonly=0)
                            (malloc=96 tag=Shared class space #2) (at peak)
                            (mmap: reserved=16777216, committed=14176256, peak=14385152)

-               Arena Chunk (reserved=438832, committed=438832)
                            (malloc=438832 tag=Arena Chunk #90) (peak=1073504 #63)

-                   Tracing (reserved=8785, committed=8785)
                            (malloc=8785 tag=Tracing #42) (at peak)

-                Statistics (reserved=128, committed=128)
                            (malloc=128 tag=Statistics #2) (at peak)

-                 Arguments (reserved=86, committed=86)
                            (malloc=86 tag=Arguments #4) (at peak)

-                    Module (reserved=41192, committed=41192)
                            (malloc=41192 tag=Module #1259) (at peak)

-                 Safepoint (reserved=8192, committed=8192)
                            (mmap: reserved=8192, committed=8192, at peak)

-           Synchronization (reserved=25864, committed=25864)
                            (malloc=25864 tag=Synchronization #238) (at peak)

-            Serviceability (reserved=17216, committed=17216)
                            (malloc=17216 tag=Serviceability #10) (at peak)

-                 Metaspace (reserved=67121728, committed=340544)
                            (malloc=12864 tag=Metaspace #10) (at peak)
                            (mmap: reserved=67108864, committed=327680, at peak)

-      String Deduplication (reserved=680, committed=680)
                            (malloc=680 tag=String Deduplication #8) (at peak)

-           Object Monitors (reserved=2400, committed=2400)
                            (malloc=2400 tag=Object Monitors #12) (peak=3000 #15)

-                       JNI (reserved=8480, committed=8480)
                            (malloc=8480 tag=JNI #10) (at peak)

];
 stderr: []
 exitValue = 0

 stdout: [Alive: 0
Alive: 1
Alive: 2
Alive: 3
Alive: 4
Alive: 5
Alive: 6
Alive: 7
Alive: 8
Alive: 9
Alive: 10
Alive: 11
Alive: 12
Alive: 13
Alive: 14
Alive: 15

Native Memory Tracking:

Total: reserved=2082525174, committed=554176502
       malloc: 348819446 #7787, peak=348687952 #7798
       mmap:   reserved=1733705728, committed=205357056

-                 Java Heap (reserved=104857600, committed=104857600)
                            (mmap: reserved=104857600, committed=104857600, at peak)

-                     Class (reserved=1073818729, committed=207977)
                            (classes #817)
                            (  instance classes #676, array classes #141)
                            (malloc=76905 tag=Class #991) (peak=77001 #989)
                            (mmap: reserved=1073741824, committed=131072, at peak)
                            (  Metadata:   )
                            (    reserved=67108864, committed=327680)
                            (    used=235320)
                            (    waste=92360 =28.19%)
                            (  Class space:)
                            (    reserved=1073741824, committed=131072)
                            (    used=15120)
                            (    waste=115952 =88.46%)

-                    Thread (reserved=148033552, committed=8577040)
                            (threads #28)
                            (stack: reserved=147914752, committed=8458240, peak=8458240)
                            (malloc=81600 tag=Thread #200) (peak=90104 #204)
                            (arena=37200 #62) (peak=83456 #30)

-                      Code (reserved=253697792, committed=7798528)
                            (malloc=68392 tag=Code #1641) (peak=68400 #1642)
                            (mmap: reserved=253628416, committed=7729152, at peak)
                            (arena=984 #1) (peak=1968 #2)

-                        GC (reserved=415825906, committed=415825906)
                            (malloc=346193906 tag=GC #1487) (at peak)
                            (mmap: reserved=69632000, committed=69632000, at peak)

-                 GCCardSet (reserved=488, committed=488)
                            (malloc=488 tag=GCCardSet #4) (peak=616 #5)

-                  Compiler (reserved=203592, committed=203592)
                            (malloc=2856 tag=Compiler #27) (peak=3816 #33)
                            (arena=200736 #6) (peak=650872 #13)

-                  Internal (reserved=295682, committed=295682)
                            (malloc=258818 tag=Internal #1474) (peak=260346 #1481)
                            (mmap: reserved=36864, committed=36864, at peak)

-                    Symbol (reserved=1161492, committed=1161492)
                            (malloc=792852 tag=Symbol #155) (at peak)
                            (arena=368640 #1) (at peak)

-    Native Memory Tracking (reserved=146886, committed=146886)
                            (malloc=6720 tag=Native Memory Tracking #120) (peak=7192 #130)
                            (tracking overhead=140166)

-        Shared class space (reserved=16777312, committed=14176352, readonly=0)
                            (malloc=96 tag=Shared class space #2) (at peak)
                            (mmap: reserved=16777216, committed=14176256, peak=14385152)

-               Arena Chunk (reserved=471584, committed=471584)
                            (malloc=471584 tag=Arena Chunk #91) (peak=1105248 #63)

-                   Tracing (reserved=8785, committed=8785)
                            (malloc=8785 tag=Tracing #42) (at peak)

-                Statistics (reserved=128, committed=128)
                            (malloc=128 tag=Statistics #2) (at peak)

-                 Arguments (reserved=86, committed=86)
                            (malloc=86 tag=Arguments #4) (at peak)

-                    Module (reserved=41192, committed=41192)
                            (malloc=41192 tag=Module #1259) (at peak)

-                 Safepoint (reserved=8192, committed=8192)
                            (mmap: reserved=8192, committed=8192, at peak)

-           Synchronization (reserved=26072, committed=26072)
                            (malloc=26072 tag=Synchronization #240) (at peak)

-            Serviceability (reserved=17216, committed=17216)
                            (malloc=17216 tag=Serviceability #10) (at peak)

-                 Metaspace (reserved=67121728, committed=340544)
                            (malloc=12864 tag=Metaspace #10) (at peak)
                            (mmap: reserved=67108864, committed=327680, at peak)

-      String Deduplication (reserved=680, committed=680)
                            (malloc=680 tag=String Deduplication #8) (at peak)

-           Object Monitors (reserved=2000, committed=2000)
                            (malloc=2000 tag=Object Monitors #10) (peak=2200 #11)

-                       JNI (reserved=8480, committed=8480)
                            (malloc=8480 tag=JNI #10) (at peak)

];
 stderr: []
 exitValue = 0

STATUS:Passed.
----------rerun:(35/2701)*----------
cd /hygonjdk/yansendao/git/jdk-ysd/tmp/scratch/18 && \\
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/999/bus \\
DISPLAY=:7 \\
HOME=/hygonjdk/yansendao \\
LANG=C.UTF-8 \\
PATH=/bin:/usr/bin:/usr/sbin \\
XDG_DATA_DIRS=/usr/local/share:/usr/share:/var/lib/snapd/desktop \\
XDG_RUNTIME_DIR=/run/user/999 \\
XDG_SESSION_CLASS=user \\
XDG_SESSION_ID=5681 \\
XDG_SESSION_TYPE=tty \\
CLASSPATH=/hygonjdk/yansendao/git/jdk-ysd/tmp/classes/4/runtime/Thread/TestAlwaysPreTouchStacks.d:/hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg/runtime/Thread:/hygonjdk/yansendao/git/jdk-ysd/tmp/classes/4/test/lib:/hygonjdk/yansendao/git/jdk-ysd/test/lib:/hygonjdk/yansendao/software/jdk/jtreg-7.5/lib/javatest.jar:/hygonjdk/yansendao/software/jdk/jtreg-7.5/lib/jtreg.jar \\
    /hygonjdk/yansendao/git/jdk-ysd/build/linux-x86_64-server-release/images/jdk/bin/java \\
        -Dtest.vm.opts= \\
        -Dtest.tool.vm.opts= \\
        -Dtest.compiler.opts= \\
        -Dtest.java.opts= \\
        -Dtest.jdk=/hygonjdk/yansendao/git/jdk-ysd/build/linux-x86_64-server-release/images/jdk \\
        -Dcompile.jdk=/hygonjdk/yansendao/git/jdk-ysd/build/linux-x86_64-server-release/images/jdk \\
        -Dtest.timeout.factor=1.0 \\
        -Dtest.nativepath=/hygonjdk/yansendao/git/jdk-ysd/build/linux-x86_64-server-release/images/test/hotspot/jtreg/native \\
        -Dtest.root=/hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg \\
        -Dtest.name=runtime/Thread/TestAlwaysPreTouchStacks.java \\
        -Dtest.verbose=Verbose[p=BRIEF,f=FULL,e=FULL,t=false,m=false] \\
        -Dtest.file=/hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg/runtime/Thread/TestAlwaysPreTouchStacks.java \\
        -Dtest.main.class=TestAlwaysPreTouchStacks \\
        -Dtest.src=/hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg/runtime/Thread \\
        -Dtest.src.path=/hygonjdk/yansendao/git/jdk-ysd/test/hotspot/jtreg/runtime/Thread:/hygonjdk/yansendao/git/jdk-ysd/test/lib \\
        -Dtest.classes=/hygonjdk/yansendao/git/jdk-ysd/tmp/classes/4/runtime/Thread/TestAlwaysPreTouchStacks.d \\
        -Dtest.class.path=/hygonjdk/yansendao/git/jdk-ysd/tmp/classes/4/runtime/Thread/TestAlwaysPreTouchStacks.d:/hygonjdk/yansendao/git/jdk-ysd/tmp/classes/4/test/lib \\
        -Dtest.modules='java.base/jdk.internal.misc java.management' \\
        --add-modules java.base,java.management \\
        --add-exports java.base/jdk.internal.misc=ALL-UNNAMED \\
        -Djava.library.path=/hygonjdk/yansendao/git/jdk-ysd/build/linux-x86_64-server-release/images/test/hotspot/jtreg/native \\
        com.sun.javatest.regtest.agent.MainWrapper /hygonjdk/yansendao/git/jdk-ysd/tmp/runtime/Thread/TestAlwaysPreTouchStacks.d/driver.1.jta preTouch
result: Passed. Execution successful


test result: Passed. Execution successful
