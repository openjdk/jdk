.'" t
."
." Copyright 2006 Sun Microsystems, Inc.  All Rights Reserved.
." DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
."
." This code is free software; you can redistribute it and/or modify it
." under the terms of the GNU General Public License version 2 only, as
." published by the Free Software Foundation.
."
." This code is distributed in the hope that it will be useful, but WITHOUT
." ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
." FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
." version 2 for more details (a copy is included in the LICENSE file that
." accompanied this code).
."
." You should have received a copy of the GNU General Public License version
." 2 along with this work; if not, write to the Free Software Foundation,
." Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
."
." Please contact Sun Microsystems, Inc., 4150 Network Circle, Santa Clara,
." CA 95054 USA or visit www.sun.com if you need additional information or
." have any questions.
." 
." `
.TH jhat 1 "2006 年 9 月 4 日" "Java SE 6" "ユーザーコマンド"
." Generated by html2roff

.LP
.SH 名前
jhat \- Java ヒープ解析ツール
.LP
.SH "形式"
.LP

.LP
.nf
\f3
.fl
\fP\f3jhat\fP [ \f2options\fP ] <heap\-dump\-file>
.fl

.fl
.fi

.LP
.SH "パラメータ"
.LP

.LP
.TP 3
options 
オプションを使用する場合、コマンド名の直後に記述してください。 
.TP 3
heap\-dump\-file 
ブラウズ対象となる Java バイナリヒープダンプファイル。複数のヒープダンプを含むダンプファイルの場合、「foo.hprof#3」のようにファイル名の後に「#<number>」を付加することで、ファイル内の特定のダンプを指定できます。 
.LP
.SH "説明"
.LP

.LP
.LP
\f3jhat\fP コマンドは、java ヒープダンプファイルを解析し、Web サーバを起動します。jhat を使えば、お好みの Web ブラウザを使ってヒープダンプをブラウズできます。jhat は、「ある既知のクラス「Foo」のすべてのインスタンスを表示する」といった、事前に設計されたクエリのほか、\f3OQL\fP (\f3O\fPbject \f3Q\fPuery \f3L\fPanguage) もサポートします。\f3OQL\fP は、ヒープダンプに対するクエリを行うための、SQL に似たクエリ言語です。OQL のヘルプには、jhat によって表示される OQL ヘルプページからアクセスできます。デフォルトポートを使用する場合、OQL のヘルプは http://localhost:7000/oqlhelp/ で利用可能です。
.LP
.LP
Java のヒープダンプを生成するには、いくつかの方法があります。
.LP
.RS 3
.TP 2
*
jmap の \-dump オプションを使って実行時にヒープダンプを取得する。 
.TP 2
*
jconsole のオプションを使って 
.na
\f2HotSpotDiagnosticMXBean\fP
.fi
(http://java.sun.com/javase/6/docs/jre/api/management/extension/com/sun/management/HotSpotDiagnosticsMXBean.html) 経由で実行時にヒープダンプを取得する。 
.TP 2
*
\-XX:+HeapDumpOnOutOfMemoryError VM オプションを指定すると、OutOfMemoryError のスロー時にヒープダンプが生成される。 
.TP 2
*

.na
\f2hprof\fP
.fi
(http://java.sun.com/developer/technicalArticles/Programming/HPROF.html) を使用する。 
.RE

.LP
.LP
\f3注:\fP このツールは試験的なものであり、JDK の将来のバージョンでは使用できない可能性があります。
.LP
.SH "オプション"
.LP

.LP
.TP 3
\-stack false/true 
オブジェクト割り当て呼び出しスタックの追跡を無効にします。ヒープダンプ内で割り当てサイト情報が使用できない場合、このフラグを false に設定する必要があります。デフォルトは true です。 
.TP 3
\-refs false/true 
オブジェクトへの参照の追跡を無効にします。デフォルトは true です。デフォルトでは、ヒープ内のすべてのオブジェクトについて、バックポインタ (指定されたオブジェクトをポイントしているオブジェクト。つまり、参照者または受信参照) が計算されます。 
.TP 3
\-port port\-number 
jhat の HTTP サーバのポートを設定します。デフォルトは 7000 です。 
.TP 3
\-exclude exclude\-file 
「到達可能なオブジェクト」のクエリから除外すべきデータメンバの一覧を含むファイルを指定します。たとえば、このファイルに \f2java.lang.String.value\fP が含まれていた場合、特定のオブジェクト「o」から到達可能なオブジェクトのリストを計算する際に、\f2java.lang.String.value\fP フィールドに関連する参照パスが考慮されなくなります。 
.TP 3
\-baseline baseline\-dump\-file 
ベースラインとなるヒープダンプを指定します。両方のヒープダンプ内で同じオブジェクト ID を持つオブジェクトは「新規ではない」としてマークされます。その他のオブジェクトは「新規」としてマークされます。これは、異なる 2 つのヒープダンプを比較する際に役立ちます。 
.TP 3
\-debug int 
このツールのデバッグレベルを設定します。0 は「デバッグ出力なし」を意味します。より大きな値を設定すると、より冗長なモードになります。 
.TP 3
\-version\  
バージョン番号を報告したあと、終了します。 
.TP 3
\-h\  
ヘルプメッセージを出力したあと、終了します。 
.TP 3
\-help\  
ヘルプメッセージを出力したあと、終了します。 
.TP 3
\-J<flag>\  
jhat が実行されている Java 仮想マシンに <flag> を渡します。たとえば、512M バイトの最大ヒープサイズを使用するには、\-J\-Xmx512m とします。 
.LP
.SH "関連項目"
.LP
.RS 3
.TP 2
*
jmap \- Java メモリマップ 
.TP 2
*
jconsole \- Java 監視および管理コンソール 
.TP 2
*
.na
\f2hprof \- ヒープおよび CPU プロファイリングツール\fP
.fi
(http://java.sun.com/developer/technicalArticles/Programming/HPROF.html)
.RE

.LP

.LP
 
